(this.webpackJsonpsnake=this.webpackJsonpsnake||[]).push([[0],{23:function(t,e,i){t.exports=i(39)},28:function(t,e,i){},29:function(t,e,i){},30:function(t,e,i){},36:function(t,e,i){},37:function(t,e,i){},38:function(t,e,i){},39:function(t,e,i){"use strict";i.r(e);var n=i(0),r=i.n(n),a=i(17),s=i.n(a),o=i(10),h=i(6),c=i(7),l=i(21),u=i(18),d=i(22),m=i(8),f=i(5);i(28);var v=function(t){return r.a.createElement("button",{className:"button",onClick:t.onClick},t.text)};i(29);var k=function(t){return r.a.createElement("div",{className:"score"},r.a.createElement("span",null,"\u041e\u0427\u041a\u0418:"),r.a.createElement("span",null,t.value))},p=(i(30),function(){function t(e,i,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(h.a)(this,t),this.xCord=this.prevXCord=e,this.yCord=this.prevYCord=i,this.size=n,this.isHead=r,this.draw=this.draw.bind(this),this.getPrevCords=this.getPrevCords.bind(this),this.getCurrentCords=this.getCurrentCords.bind(this),this.setCurrentCords=this.setCurrentCords.bind(this)}return Object(c.a)(t,[{key:"getPrevCords",value:function(){return[this.prevXCord,this.prevYCord]}},{key:"getCurrentCords",value:function(){return[this.xCord,this.yCord]}},{key:"setCurrentCords",value:function(t,e){this.prevXCord=this.xCord,this.prevYCord=this.yCord,this.xCord=t,this.yCord=e}},{key:"draw",value:function(t){t.fillStyle="rgb(0,200,0)",t.fillRect(this.xCord,this.yCord,this.size,this.size),t.fillStyle="#000",t.strokeRect(this.xCord-1,this.yCord-1,this.size+2,this.size+2)}}]),t}()),y=function(){function t(e,i,n){Object(h.a)(this,t),this.xCord=e,this.yCord=i,this.size=n}return Object(c.a)(t,[{key:"draw",value:function(t){t.fillStyle="rgb(200,0,0)",t.fillRect(this.xCord,this.yCord,this.size,this.size),t.fillStyle="#000",t.strokeRect(this.xCord-1,this.yCord-1,this.size+2,this.size+2)}},{key:"getCoords",value:function(){return[this.xCord,this.yCord]}}]),t}(),C={ArrowLeft:-1,ArrowRight:1,ArrowUp:-2,ArrowDown:2},g=function(){function t(e,i,n){Object(h.a)(this,t),this.snake=[],this.snakeHead=null,this.apple=null,this.xCordStart=i,this.yCordStart=n,this.points=0,this.AWARD_FOR_APPLE=5,this.SPEED_INCREASING_INDEX=5,this.speed=300,this.SNAKE_PART_SIZE=25,this.currentDirection=C.ArrowRight,this.nextDirection=C.ArrowRight,this.lastTimeRedrawing=null,this.ready=!1,this.rafID=null,this.gameIsEnded=!0,this.initSnake=this.initSnake.bind(this),this.loop=this.loop.bind(this),this.setContext=this.setContext.bind(this),this.setWidthLimit=this.setWidthLimit.bind(this),this.setHeightLimit=this.setHeightLimit.bind(this),this.setReadyStatus=this.setReadyStatus.bind(this),this.getReadyStatus=this.getReadyStatus.bind(this),this.drawSnake=this.drawSnake.bind(this),this.drawEndGame=this.drawEndGame.bind(this),this.stopGame=this.stopGame.bind(this),this.startGame=this.startGame.bind(this),this.isPlayerLost=this.isPlayerLost.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.initSnake(e),this.img=new Image(400,400),this.img.src="/wasted.png"}return Object(c.a)(t,[{key:"setGameIsOverSetter",value:function(t){this.setGameIsOver=t}},{key:"setScoreSetter",value:function(t){this.setScoreToUI=t}},{key:"setContext",value:function(t){this.ctx=t}},{key:"setWidthLimit",value:function(t){this.wLimit=t}},{key:"setHeightLimit",value:function(t){this.hLimit=t}},{key:"setReadyStatus",value:function(t){this.ready=t}},{key:"getReadyStatus",value:function(){return this.ready}},{key:"initSnake",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,e=0;e<t;e++){var i=0===e,n=this.xCordStart;i||(n=this.xCordStart-e*this.SNAKE_PART_SIZE);var r=new p(n,this.yCordStart,this.SNAKE_PART_SIZE,i);i&&(this.snakeHead=r),this.snake.push(r)}}},{key:"getRandomInt",value:function(t){return Math.floor(Math.random()*Math.floor(t))}},{key:"checkForCrossWithSnake",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!0,r=!0,a=!1,s=void 0;try{for(var o,h=this.snake[Symbol.iterator]();!(r=(o=h.next()).done);r=!0){var c=o.value;if(!i||this.snakeHead!==c){var l=c.getCurrentCords(),u=Object(f.a)(l,2),d=u[0],m=u[1];t===d&&e===m&&(n=!1)}}}catch(v){a=!0,s=v}finally{try{r||null==h.return||h.return()}finally{if(a)throw s}}return n}},{key:"drawApple",value:function(){if(!this.apple){for(var t,e;t=25*this.getRandomInt(20),e=25*this.getRandomInt(20),!this.checkForCrossWithSnake(t,e););this.apple=new y(t,e,25)}this.apple.draw(this.ctx)}},{key:"drawSnake",value:function(){var t=this;if(0!==this.snake.length){var e=null,i=this.SNAKE_PART_SIZE;this.snake.forEach((function(n){if(n===t.snakeHead){var r=n.getCurrentCords(),a=Object(f.a)(r,2),s=a[0],o=a[1],h=t.apple.getCoords(),c=Object(f.a)(h,2),l=c[0],u=c[1];switch(s===l&&o===u&&(t.points+=t.AWARD_FOR_APPLE,t.speed-=t.speed<=100?0:t.SPEED_INCREASING_INDEX,t.apple=null,t.addPartToSnake(),t.setScoreToUI(t.points)),t.currentDirection){case C.ArrowRight:s+=i;break;case C.ArrowLeft:s-=i;break;case C.ArrowUp:o-=i;break;case C.ArrowDown:o+=i}n.setCurrentCords(s,o)}if(e){var d=e.getPrevCords(),m=Object(f.a)(d,2),v=m[0],k=m[1];n.setCurrentCords(v,k)}n.draw(t.ctx),e=n})),!this.gameIsEnded&&this.isPlayerLost()&&this.stopGame()}else console.log("The Snake hasn't been initialize.")}},{key:"drawEndGame",value:function(){this.ctx.clearRect(0,0,this.wLimit,this.hLimit),this.ctx.drawImage(this.img,0,0,500,500)}},{key:"addPartToSnake",value:function(){var t=this.snake[this.snake.length-1].getCurrentCords(),e=Object(f.a)(t,2),i=e[0],n=e[1],r=new p(i,n,this.SNAKE_PART_SIZE);this.snake.push(r)}},{key:"startGame",value:function(){document.onkeydown=this.onKeyDown,this.gameIsEnded=!1,this.points=0,this.rafID=requestAnimationFrame(this.loop),this.setScoreToUI(0)}},{key:"stopGame",value:function(){document.onkeydown=null,this.gameIsEnded=!0,this.setGameIsOver(!0)}},{key:"loop",value:function(t){this.gameIsEnded?this.drawEndGame():(this.lastTimeRedrawing||(this.lastTimeRedrawing=t),t-this.lastTimeRedrawing>=this.speed&&(this.currentDirection=this.nextDirection,this.ctx.clearRect(0,0,this.wLimit,this.hLimit),this.drawApple(),this.drawSnake(),this.lastTimeRedrawing=t),this.rafID=requestAnimationFrame(this.loop))}},{key:"isPlayerLost",value:function(){var t=!1,e=this.currentDirection,i=this.SNAKE_PART_SIZE,n=this.snakeHead.getCurrentCords(),r=Object(f.a)(n,2),a=r[0],s=r[1];switch(e){case C.ArrowRight:a+i>this.wLimit&&(t=!0);break;case C.ArrowLeft:a<0&&(t=!0);break;case C.ArrowUp:s<0&&(t=!0);break;case C.ArrowDown:s+i>this.hLimit&&(t=!0)}return this.checkForCrossWithSnake(a,s,!0)||(t=!0),t}},{key:"onKeyDown",value:function(t){this.nextDirection=C[t.code],void 0===this.nextDirection&&(this.nextDirection=this.currentDirection),this.currentDirection===-1*this.nextDirection&&(this.nextDirection=this.currentDirection)}}]),t}();var S=function(t){var e=Object(n.useState)(0),i=Object(f.a)(e,2),a=i[0],s=i[1],o=Object(n.useState)(!1),h=Object(f.a)(o,2),c=h[0],l=h[1],u=Object(n.useRef)(null),d=new g(2,0,225);return Object(n.useEffect)((function(){if(!d.getReadyStatus()){var t=u.current.getContext("2d");d.setContext(t),d.setWidthLimit(u.current.width),d.setHeightLimit(u.current.height),d.setScoreSetter(s),d.setGameIsOverSetter(l),d.setReadyStatus(!0)}})),Object(n.useEffect)((function(){c&&function(){var t=prompt("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u0434\u043b\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430.");if(t){var e=localStorage.getItem(t);if(e&&Number(e)>a)return void console.log("Your previous scores record bigger than current.");localStorage.setItem(t,a)}}()}),[c]),r.a.createElement("div",{className:"wrapper"},r.a.createElement(k,{value:a}),r.a.createElement("canvas",{ref:u,id:"gamespace",width:"500",height:"500"},"\u041f\u043e\u0445\u043e\u0436\u0435, \u0447\u0442\u043e \u0432\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0435 \u043e\u0447\u0435\u043d\u044c \u0441\u0442\u0430\u0440\u044b\u0439 \u0431\u0440\u0430\u0443\u0437\u0435\u0440. \u0412\u044b \u043c\u043d\u043e\u0433\u043e\u0435 \u0442\u0435\u0440\u044f\u0435\u0442\u0435..."),r.a.createElement(v,{onClick:function(t){t.preventDefault(),l(!1),d.startGame()},text:"\u041d\u0430\u0447\u0430\u0442\u044c"}))};var w=function(t){return r.a.createElement("li",null,r.a.createElement(o.b,{to:t.link},t.text))};i(36);var E=function(t){return r.a.createElement("div",{className:"wrapper"},r.a.createElement("h2",null,"\u0417\u043c\u0435\u0439\u043a\u0430"),r.a.createElement("ul",null,r.a.createElement(w,{link:"/SimpleSnake/game",text:"\u0418\u0433\u0440\u0430"}),r.a.createElement(w,{link:"/SimpleSnake/scorestable",text:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432"})))};i(37);function b(t){return r.a.createElement("tr",null,r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.scores))}function R(t){return r.a.createElement("tr",null,r.a.createElement("th",null,"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),r.a.createElement("th",null,"\u041d\u0430\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u043e\u0447\u043a\u0438"))}var x=function(t){for(var e=[],i=[],n=0;n<localStorage.length;n++){var a=localStorage.key(n);i.push({key:a,value:localStorage.getItem(a)})}return i.sort((function(t,e){var i=Number(t.value),n=Number(e.value);return i>n?-1:i<n?1:0})),i.forEach((function(t){e.push(r.a.createElement(b,{name:t.key,scores:t.value,key:t.key}))})),r.a.createElement("div",{className:"wrapper"},r.a.createElement("table",null,r.a.createElement("caption",null,"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0440\u0435\u043a\u043e\u0440\u0434\u043e\u0432"),r.a.createElement("tbody",null,r.a.createElement(R,null),e)))};var A=function(t){return r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/SimpleSnake",component:E}),r.a.createElement(m.a,{path:"/SimpleSnake/game",component:S}),r.a.createElement(m.a,{path:"/SimpleSnake/scorestable",component:x}))},I=(i(38),function(t){function e(){return Object(h.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return r.a.createElement(A,null)}}]),e}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(o.a,null,r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[23,1,2]]]);
//# sourceMappingURL=main.e26363f2.chunk.js.map